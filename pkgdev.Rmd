---
title: "pkgdev"
author: "Alexander Kirchmair"
---

```{r setup, include=FALSE}

library(devtools)
library(usethis)
library(testthat)

```


```{r initial setup}

use_mit_license()
use_readme_rmd()
use_pipe()

```



```{r}

library("SummarizedExperiment")
library("BiocGenerics")

```

```{r}

use_package("ggplot2")
use_package("dplyr")
use_package("BiocGenerics")
use_package("SummarizedExperiment")
use_package("methods")
use_package("IsoCorrectoR")
use_package("crayon")
use_package("rlang")
use_package("matrixStats")

use_package("multcomp", type = "Suggests")
use_package("glmmTMB", type = "Suggests")
use_package("limma", type = "Suggests")
use_package("nlme", type = "Suggests")
use_package("missForest", type = "Suggests")
use_package("betareg", type = "Suggests")
use_package("contrast", type = "Suggests")


```




R functions
```{r}

use_r("AllClasses")
use_r("AllGenerics")
use_r("AllMethods")
use_r("AllImports")

use_r("r-data-functions")
use_r("r-preprocessing-functions")
use_r("r-normalization-functions")
use_r("r-imputation-functions")
use_r("r-difftest-functions")
use_r("r-plotting-functions")
use_r("r-isocorrection-functions")
use_r("r-testing-functions")


```


Element data
```{r}

isocomp <- getElementCompositions()
use_data(isocomp, internal = TRUE) # include data in package

```


```{r}
load_all()

```


Update documentation
Code > Insert Roxygen Skeleton
```{r}

document()

```


Unit tests
```{r}

lapply(list.files("R/", pattern = ".R"), use_test)

```


Test/check
```{r check}

check()

```




```{r}

usethis::use_build_ignore("pkgdev.Rmd")
usethis::use_build_ignore("desktop.ini")
usethis::use_git_ignore("desktop.ini")

```




```{r}

devtools::build_readme()

```




```{r}
load_all()
TE <- exampleTracerExperiment(add_qc = TRUE) |> estimateLOQs() |> preprocessLOQs() |> impute(nan = 0, na = "linsubLODs") |> normalize(assay = "imp", method = ~ COLSUM)
TE <- clean(TE, max_nafrac_per_group = NULL)
TE@isoAssays$clean
sumMets(TE, assay = "clean", thres_LOQ = 1, max_nafrac_per_met = 0.5, max_nafrac_per_group = 1, min_rep_per_group = 1, min_groupfrac_per_iso = 0)

TE<-MID(TE)
MID(TE, assay = "clean")
isoEnrichment(TE, new_assay = NULL)

```




Install the package
```{r}

install()

```







